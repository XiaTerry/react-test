<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="reactjs/react.development.js"></script>
    <script src="reactjs/react-dom.development.js"></script>
    <script src="reactjs/babel.min.js"></script>
    <title>Document</title>
    <style>              
        .thead-bg{
            background-color: #000;
            color: #fff;
        }
        .red{
            background-color: #00f;
        }
    </style>
</head>
<body>
    <div class="text-center" id="root">
    </div>
    <script type="text/babel">
    class TodoList extends React.Component{
        constructor(props){
            super(props);
            this.state={
                eventList:[
                    {
                        eventName:'上课',
                        eventTime:'2018-09-14',
                        time:'2',
                        isRed:false,
                    },
                    {
                        eventName:'吃饭',
                        eventTime:'2018-09-14',
                        time:'2',
                        isRed:false,
                    },
                    {
                        eventName:'午休',
                        eventTime:'2018-09-14',
                        time:'2',
                        isRed:false,
                    },
                    {
                        eventName:'篮球',
                        eventTime:'2018-09-14',
                        time:'2',
                        isRed:false,
                    },
                    {
                        eventName:'聚会',
                        eventTime:'2018-09-14',
                        time:'2',
                        isRed:false,
                    }
                ],
            }
        };
        render(){
            return(
                <div>
                    <Search list={this.state.eventList} evObj={this.state.obj}/>
                </div>
                )
            }
        }
        class Search extends React.Component {
            constructor(props){
            super(props);
            this.state={
                eventList:this.props.list,
                    evname:'',
                    evtime:'',
                    time:'',
                };
            this.handleSubmit = this.handleSubmit.bind(this);
            this.add = this.add.bind(this);
            }
            add(){
                this.state.eventList.push({
                    eventName:this.state.evname,
                    eventTime:this.state.evtime,
                    time:this.state.time,
                    isRed:false
                })
                this.setState({
                    evname:this.state.evname,
                    evtime:this.state.evtime,
                    time:this.state.time,
                })
            }
            handleSubmit(event){
                event.preventDefault();
            }
            handleChange1(event){
                this.setState({
                    evname: event.target.value,
                });
            }
            handleChange2(event){
                this.setState({
                    evtime: event.target.value,
                });
            }
            handleChange3(event){
                this.setState({
                    time: event.target.value,
                });
            }
            render() {
                return (
                    <div>
                        <h1>todoList</h1>
                        <hr/>
                        <form className="form-inline" onSubmit={this.handleSubmit}>
                            <input type="text" className="form-control" id="exampleInputName2" placeholder="请输入商品名称"/>
                            <button type="submit" className="btn btn-default">搜索</button>
                            <br/>
                            <div className="form-group">
                            <label htmlFor="exampleInputName2">待办事项：</label>
                            <input  type="text" className="form-control" id="exampleInputName2" placeholder="待办事项" onChange={this.handleChange1.bind(this)}/>
                            </div>
                            <div className="form-group">
                            <label htmlFor="exampleInputEmail2">待办时间：</label>
                            <input type="date" className="form-control" id="exampleInputEmail2" placeholder="年/月/日" onChange={this.handleChange2.bind(this)}/>
                            </div>
                            <div className="form-group">
                            <label htmlFor="exampleInputEmail2">预计用时：</label>
                            <input type="text" className="form-control" id="exampleInputEmail2" placeholder="预计用时" onChange={this.handleChange3.bind(this)}/>
                            </div>
                            <button type="submit" className="btn btn-default add" onClick={this.add.bind(this)}>增加</button>
                        </form>
                        <Content list={this.state.eventList}/>
                    </div>
                );
            }
        };
        class Content extends React.Component{
            constructor(props){
            super(props);
            this.state={
                eventList:this.props.list,
                evname:'',
                evtime:'',
                time:'',
            }}
            active(index,item){
                console.log(index);
                let nowEvent = this.state.eventList[index];
                nowEvent.isRed = !nowEvent.isRed;
                this.setState({

                })
            };
            render(){
                let list = this.state.eventList;
                const listTr = list.map((item,index,array) =>
                <tr key={index} onClick={this.active.bind(this,index,array)} style={{background:item.isRed?'#f00':''}}>
                    <td><input type="checkbox"/></td>
                    <td>{item.eventName}</td>
                    <td>{item.eventTime}</td>
                    <td>{item.time}</td>
                    <td><button className="glyphicon glyphicon-trash" ></button></td>
                </tr>
                )
                return(
                <div>
                    <table className="table table-bordered text-center" >
                        <thead>
                            <tr className="thead-bg">
                                <td>选择</td>
                                <td>待办事项</td>
                                <td>待办时间</td>
                                <td>预用时间</td>
                                <td>操作</td>
                            </tr>
                        </thead>
                        <tbody>
                            {listTr}
                            <tr>
                                <td>
                                    <button>删除选中</button>
                                </td>
                                <td colSpan="4">总共用时：0</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            )
            }
        }
         ReactDOM.render(
            <TodoList/>,
            document.getElementById('root')
         )
    </script>
</body>
</html>